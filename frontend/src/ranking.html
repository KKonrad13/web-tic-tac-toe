<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ranking Graczy</title>
    <link rel="stylesheet" type="text/css" href="ranking.css">
</head>
<body>
    <h2>Ranking</h2>
    <table>
        <thead>
            <tr>
                <th>Place</th>
                <th>Nick</th>
                <th>Score</th>
            </tr>
        </thead>
        <tbody id="rankingTableBody">

        </tbody>
    </table>

    <script>
        var hostAddress = 'http://localhost:8080';
        document.addEventListener("DOMContentLoaded", function() {
            var xhr = new XMLHttpRequest();

            xhr.open('GET', hostAddress + '/get_rankings', true);
            xhr.setRequestHeader('Content-Type', 'application/json');

            xhr.onreadystatechange = function () {
                if (xhr.readyState === 4 && xhr.status === 200) {
                    var rankingData = JSON.parse(xhr.responseText);
                    var tableBody = document.getElementById("rankingTableBody");

                    if (rankingData.length === 0) {
                        var noDataRow = document.createElement("tr");
                        var noDataCell = document.createElement("td");
                        noDataCell.textContent = "RANKING IS EMPTY";
                        noDataCell.colSpan = 3;
                        noDataCell.classList.add("no-data");
                        noDataRow.appendChild(noDataCell);
                        tableBody.appendChild(noDataRow);
                    } else {
                        rankingData.forEach(function(player) {
                            var row = document.createElement("tr");

                            var rankCell = document.createElement("td");
                            rankCell.textContent = player.rank;
                            row.appendChild(rankCell);

                            var nickCell = document.createElement("td");
                            nickCell.textContent = player.player_nick;
                            row.appendChild(nickCell);

                            var winsCell = document.createElement("td");
                            winsCell.textContent = player.wins;
                            row.appendChild(winsCell);

                            tableBody.appendChild(row);
                        });
                    }
                } else if (xhr.readyState === 4) {
                    console.error('Error fetching rankings:', xhr.statusText);
                }
            };

            xhr.send();
        });
    </script>
</body>
</html>
